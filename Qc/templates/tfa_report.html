{% extends 'include/main.html' %}
{% load static %}
{% block body_header %}
<style>
/* Custom Styles for Section 2 */
.section-all {
    width: 794px; 
    margin: 20px auto;
    background: #fff;
    page-break-after: always; /* Always break after each section */
}

.section-all:last-child {
    page-break-after: auto; /* Prevent an extra blank page at the end */
}

.section-all .row {
    display: flex;
    flex-wrap: wrap;
    margin: 0 -15px; /* Consistent margin for rows */
    page-break-inside: avoid; /* Avoid breaking inside rows for better print results */
}

.section-all .col-lg-12,
.section-all .col-lg-6,
.section-all .col-lg-4,
.section-all .col-lg-3,
.section-all .col-lg-2 {
    padding: 0 15px; /* Padding for columns */
}

.section-all .col-lg-12 {
    flex: 0 0 100%;
}

.section-all .col-lg-6 {
    flex: 0 0 50%;
}

.section-all .col-lg-4 {
    flex: 0 0 33.33%;
}

.section-all .col-lg-3 {
    flex: 0 0 25%;
}

.section-all .col-lg-2 {
    flex: 0 0 16.66%;
}

.section-all .card {
    border: none;
    border-radius: 8px;
    overflow: hidden;
    margin-bottom: 15px; /* Margin for cards */
    page-break-inside: avoid; /* Avoid breaking inside cards */
}

.section-all .card-body {
    padding: 15px; /* Padding for card body */
    font-size: 12pt; /* Set consistent font size for card body */
}

.section-all .bg-grey {
    background-color: #f5f5f5; /* Light grey background */
    padding: 15px; /* Padding for grey background */
    border-radius: 5px; /* Rounded corners */
}

.section-all .text-muted {
    color: #6c757d; /* Muted text color */
}

.section-all .fw-bold {
    font-weight: bold; /* Bold text */
}

.section-all .border {
    border-top: 1px solid #ccc; /* Top border */
}

.section-all hr {
    border: none;
    border-top: 1px solid #ccc; /* Horizontal rule */
}

.section-all .form-check {
    margin: 5px 0; /* Margin for form check items */
}

.section-all p {
    font-size: 8pt; /* Adjust this value as needed for smaller font size */
}

/* Print Styles for Section 2 */
@media print {
    .section-all {
        width: 100%; /* Full width for print */
        margin: 0; /* No margin for print */
        border: none; /* No border for print */
        font-size: 12pt; /* Ensure font size is maintained during print */
        page-break-after: always; /* Ensure each section starts on a new page */
    }

    .section-all:last-child {
        page-break-after: auto; /* Prevent extra blank page at end */
    }

    .section-all .row {
        page-break-inside: avoid; /* Avoid breaking inside a row */
    }

    .section-all .card {
        page-break-inside: avoid; /* Prevent card breaks */
    }
}

#pdf-page {
    display: none; /* Start hidden */
}


</style>
{% endblock body_header %}

{% block body_content %}
{% include 'include/header.html' with active='tfa_flange' %}
{% include 'include/sidebar.html' with active='tfa_flange' %}
<section class="home-section pt-lg-3 pt-1">

  <div class="position-relative d-lg-none mt-5" style="background-color: #3256a1">
    <div class="container">
      <div class="py-3" style="z-index: 1">
        <div class="">
          <div>
            <p class="m-0 text-white fw-bold fs-5">SRC</p>
          </div>
          <div class="mt-2">
            <button type="button" class="btn btn-info text-white" onclick="downloadPDF('{{tfa.id}}')" >DOWNLOAD</button >
          </div>
        </div>
      </div>
    </div>

    <div class="position-absolute bottom-0 end-0">
      <img src="{% static 'img/utoc_dualleaf.png' %}" alt="" />
    </div>
  </div>
  <div class="d-lg-none px-0">
    {% include 'include/tfa_header.html' with active='report' %}
  </div>
  <div class="p-4 d-none d-lg-block overflow-hidden mt-5" style="background-color: #3256a1" >
    <div class="position-relative">
      <div class="d-flex justify-content-between">
        <div>
          <h1 class="text-white fw-bold m-0">SRC</h1>
          <p class="small text-white m-0"> Here you can control everything </p>
        </div>
        <div class="my-auto" style="z-index: 1">
          <button type="button" class="btn btn-info text-white btn-lg" onclick="downloadPDF('{{tfa.id}}')" >DOWNLOAD</button >
        </div>
      </div>
      <div class="position-absolute top-100 start-100 translate-middle left_90" >
        <img src="{% static 'img/utoc_topdual.png' %}" alt="" />
      </div>
    </div>
  </div>
  <div class="container-fluid">
    <div class="d-none d-lg-block">
      {% include 'include/tfa_header.html' with active='report' %}
    </div>
    <div class="p-lg-4 my-3 my-lg-0" >
        <div class="row">
          <div class="col-lg-3">
            <div class="card border-0 shadow-sm rounded-3">
              <div class="card-header bg-white p-3">
                <p class="m-0 fw-bold fs-5 ">QC Inspection</p>
              </div>
              <div class="card-body ">
                <div class="d-flex justify-content-between">
                  <div>
                    <p class="text-muted m-0">QC Signoff</p>
                    <p class="text-muted m-0">Approval Date</p>
                  </div>
                  <div>
                    <p class="m-0">Santhosh</p>
                    <p class="m-0">08-18-2021</p>
                  </div>
                </div>
                </div>
                </div>
                {% if tfa.status == "qcpass" %}

                <div class="card border-0 shadow-sm rounded-3 mt-3">
                  <div class="card-header bg-white p-3">
                    <p class="m-0 fw-bold fs-5 ">QA Inspection</p>
                  </div>
                  <form  method="post">
                    {% csrf_token %}
                    <div class="card-body ">
                        <div>
                          <p class="text-muted m-0">Is the flange TFA satisfactory?</p>
                          <div class="row mt-2">
                            <div class="col-lg-4 col-4">
                              <input type="radio" class="btn-check" name="is_flange_satisfactory" value="YES" id="success-outlined" >
                              <label class="btn-sm w-100 btn btn-outline-success" for="success-outlined">YES</label>
                            </div>
                            <div class="col-lg-4 col-4">
                              <input type="radio" class="btn-check" name="is_flange_satisfactory" value="NO" id="danger-outlined">
                              <label class="btn-sm w-100 btn btn-outline-danger" for="danger-outlined">NO</label>
                            </div>
                            <div class="col-lg-4 col-4">
                              <input type="radio" class="btn-check" name="is_flange_satisfactory" value="NA" id="secondary-outlined">
                              <label class="btn-sm w-100 btn btn-outline-secondary" for="secondary-outlined">N/A</label>
                            </div>
                          </div>
                        </div>
                        <div class="form-floating mt-3">
                          <textarea class="form-control" placeholder="Leave a comment here" name="admin_comments" id="floatingTextarea2" style="height: 100px"></textarea>
                          <label for="floatingTextarea2 text-muted">please enter your  comments</label>
                        </div>
                        <div class="row mt-3">
                          <div class="col-12">
                            <div class="d-grid gap-2 d-md-flex justify-content-md-end" >
                              <a href="" class="btn btn-outline-secondary" value="" type="button"> CANCEL </a>
                              <button class="btn btn-info text-white"  type="submit"> APPROVE </button>
                            </div>
                          </div>
                        </div>
                      </div>
                  </form>
                    </div>
                    {% endif %}

          </div>
          <div class="col-lg-9 mt-lg-0 mt-3">
            <div class="card border-0 shadow-sm rounded-3">
              <div class="card-header bg-white p-3">
                <p class="m-0 fw-bold fs-5 ">Report</p>
              </div>
         
              <div class="card-body ">
                <div class="row">
                    <div class="col-6">
                    <p class="m-0 fw-bold fs-5 d-none d-lg-block">  <img src="{% static 'img/utoc_headlogo1.png' %}" class="" width="50" alt="" />  FLANGE JOINT CONNECTION DATA SHEET</p>
                    <p class="m-0 fw-bold  d-lg-none">  <img src="{% static 'img/utoc_headlogo1.png' %}" class="" width="50" alt="" />  FLANGE JOINT CONNECTION DATA SHEET</p>
                    </div>
                    <div class="col-4">
                        <p class="m-0 text-muted ">CLIENT DOCUMENT NUMBER</p>
                        <p class="m-0 ">{{tfa.temp_joint_id|default:"-"}}</p>
                    </div>
                    <div class="col-2">
                      <p class="m-0 text-muted ">Page </p>
                      <p class="m-0 ">1 of 1</p>
                    </div>
                 </div>
                 <div class="bg-grey p-2 mt-3">

                   <div class="row ">
                     <div class="col-lg-3 col-3">
                       <p class="m-0 text-muted ">RECORD</p>
                       <p class="m-0 fs-5 fw-bold">{{tfa.id|default:"-"}}</p>
                     </div>
                     <div class="col-lg-3 col-3">
                       <p class="m-0 text-muted ">PROJECT NO</p>
                           <p class="m-0 ">{{tfa.project_name|default:"-"}}</p>
                     </div>
                     <div class="col-lg-3 col-3">
                       <p class="m-0 text-muted ">PROJECT NAME</p>
                           <p class="m-0 ">{{tfa.project_name|default:"-"}}</p>
                     </div>
                     <div class="col-lg-3 col-3">
                       <p class="m-0 text-muted ">DATE CREATED </p>
                           <p class="m-0 ">{{tfa.project_name|default:"-"}}</p>
                     </div>
                    </div>
                    <hr class="border m-0 my-4 pt-1">
                    <div class="row ">
                     <div class="col-lg-3 col-3">
                       <p class="m-0 text-muted ">DRAWING NAME</p>
                       <p class="m-0 ">{{tfa.permanent_joint_id|default:"-"}}</p>
                     </div>
                     <div class="col-lg-3 col-3">
                       <p class="m-0 text-muted ">TEST PACK NO.</p>
                           <p class="m-0 ">{{tfa.test_pack_no|default:"-"}}</p>
                     </div>
                    </div>
                 </div>
          


                 <hr class="border m-0 my-4 pt-1">
                 <div class="row ">
                  <div class="col-lg-3 col-3">
                    <p class="m-0 text-muted ">JOINT ID</p>
                    <p class="m-0 fs-5 fw-bold">{{tfa.temp_joint_id|default:"-"}}</p>
                  </div>
                  <div class="col-lg-3 col-3">
                    <p class="m-0 text-muted ">PIPE CLASS </p>
                        <p class="m-0 ">{{tfa.pipe_specification|default:"-"}}</p>
                  </div>
                  <div class="col-lg-3 col-3">
                    <p class="m-0 text-muted ">FLANGE RATING</p>
                        <p class="m-0 ">{{tfa.flange_rating|default:"-"}}</p>
                  </div>
                  <div class="col-lg-3 col-3">
                    <p class="m-0 text-muted ">FLANGE SIZE </p>
                        <p class="m-0 ">{{tfa.flange_size|default:"-"}}</p>
                  </div>
                 </div>

                  

         

                 <hr class="border m-0 my-4 pt-1">
                 <div class="row ">
                  <div class="col-lg-3 col-3">
                    <p class="m-0 text-muted ">FLANGE MATERIAL</p>
                    <p class="m-0 ">{{tfa.flange_material|default:"-"}}</p>
                  </div>
                  <div class="col-lg-3 col-3">
                    <p class="m-0 text-muted ">BOLT MATERIAL</p>
                        <p class="m-0 ">{{tfa.bolt_material|default:"-"}}</p>
                  </div>
                  <div class="col-lg-3 col-3">
                    <p class="m-0 text-muted ">NUMBER OF BOLTS</p>
                        <p class="m-0 ">{{tfa.no_of_bolts|default:"-"}}</p>
                  </div>
                  <div class="col-lg-3 col-3">
                    <p class="m-0 text-muted ">BOLT STUD SIZE </p>
                        <p class="m-0 ">{{tfa.bolt_diameter|default:"-"}}</p>
                  </div>
                 </div>

                 <hr class="border m-0 my-4 pt-1">
                 <div class="row ">
                  <div class="col-lg-3 col-3">
                    <p class="m-0 text-muted ">BOLT LENGTH</p>
                    <p class="m-0 ">{{tfa.bolt_length|default:"-"}}</p>
                  </div>
                  <div class="col-lg-3 col-3">
                    <p class="m-0 text-muted ">NUT MATERIAL</p>
                        <p class="m-0 ">{{tfa.nut_material|default:"-"}}</p>
                  </div>
                  <div class="col-lg-3 col-3">
                    <p class="m-0 text-muted ">GASKET TYPE</p>
                        <p class="m-0 ">{{tfa.gasket_material|default:"-"}}</p>
                  </div>
                  <div class="col-lg-3 col-3">
                    <p class="m-0 text-muted ">LUBRICANT </p>
                        <p class="m-0 ">{{tfa.lubricant|default:"-"}}</p>
                  </div>
                 </div>

                 <hr class="border m-0 my-4 pt-1">
                 <div class="row ">
                  <div class="col-lg-3 col-3">
                    <p class="m-0 text-muted ">TIGHTENING METHOD</p>
                    <p class="m-0 "> <i class="bi bi-square"></i> MANUAL</p>
                    <p class="m-0 "> <i class="bi bi-square"></i> 2HYDRAULIC</p>
                    <p class="m-0 "> <i class="bi bi-square"></i> TENSIONING</p>
                   
                  </div>
                  <div class="col-lg-3 col-3">
                    <div class="col-lg-3 col-3">
                      <p class="m-0 text-muted ">CRITICAL</p>
                      <p class="m-0 "> <i class="bi bi-square"></i> YES</p>
                    <p class="m-0 "> <i class="bi bi-square"></i> NO</p>
                 
                    </div>
                  </div>
           
         
                 </div>

                 <hr class="border m-0 my-4 pt-1">
                 <div class="row ">
                  <div class="col-lg-3 col-3">
                    <p class="m-0 text-muted ">TOOL DESCRIPTION</p>
                    <p class="m-0 ">{{tfa.flange_description|default:"-"}}</p>
                  </div>
                  <div class="col-lg-3 col-3">
                    <p class="m-0 text-muted ">SERIAL NUMBER</p>
                        <p class="m-0 ">{{tfa.system_number|default:"-"}}</p>
                  </div>
                  <div class="col-lg-3 col-3">
                    <p class="m-0 text-muted ">CALIBRATION DUE DATE</p>
                        <p class="m-0 ">{{tfa.temp_joint_id|default:"-"}}</p>
                  </div>
          
                 </div>

                 
                 <hr class="border m-0 my-4 pt-1">
                 <div class="row ">
                  <div class="col-lg-4 col-4">
                    <p class="m-0 text-muted ">REQUIRED TORQUE VALUE</p>
                    <p class="m-0 ">{{tfa.required_torque|default:"-"}}</p>
                  </div>
                  <div class="col-lg-2 col-2">
                    <p class="m-0 text-muted ">1ST PASS RANGE</p>
                        <p class="m-0 ">{{tfa.pass_one|default:"-"}}</p>
                  </div>
                  <div class="col-lg-2 col-2">
                    <p class="m-0 text-muted ">2ND PASS RANGE</p>
                        <p class="m-0 ">{{tfa.pass_two|default:"-"}}</p>
                  </div>
                  <div class="col-lg-2 col-2">
                    <p class="m-0 text-muted ">3RD PASS RANGE</p>
                        <p class="m-0 ">{{tfa.pass_three|default:"-"}}</p>
                  </div>
                  <div class="col-lg-2 col-2">
                    <p class="m-0 text-muted ">FINAL PASS RANGE</p>
                        <p class="m-0 ">{{tfa.pass_four|default:"-"}}</p>
                  </div>
          
                 </div>

                 <hr class="border m-0 my-4 pt-1">
                 <div class="row ">
                  <div class="col-lg-2 col-2">
                    <p class="m-0 text-muted ">ANSWER</p>
                    <p class="m-0 ">
                      {% if tfa_verify.is_gasket_type_correct == 'YES' %}
                      <i class="bi bi-check-circle-fill text-success ms-4 "></i>
                      {% elif tfa_verify.is_gasket_type_correct == 'NO' %}
                      <i class="bi bi-x-circle-fill text-danger ms-4 "></i>
                      {% else %}
                      <i class="bi bi-slash-circle-fill text-secondary ms-4 "></i>
                      {% endif %}
                    </p>
                    <p class="m-0 ">
                      {% if tfa_verify.are_bolts_lubricated == 'YES' %}
                      <i class="bi bi-check-circle-fill text-success ms-4 "></i>
                      {% elif tfa_verify.are_bolts_lubricated == 'NO' %}
                      <i class="bi bi-x-circle-fill text-danger ms-4 "></i>
                      {% else %}
                      <i class="bi bi-slash-circle-fill text-secondary ms-4 "></i>
                      {% endif %}
                    </p>
                    <p class="m-0 ">
                      {% if tfa_verify.is_flange_gap_within_tolerance == 'YES' %}
                      <i class="bi bi-check-circle-fill text-success ms-4 "></i>
                      {% elif tfa_verify.is_flange_gap_within_tolerance == 'NO' %}
                      <i class="bi bi-x-circle-fill text-danger ms-4 "></i>
                      {% else %}
                      <i class="bi bi-slash-circle-fill text-secondary ms-4 "></i>
                      {% endif %}
                    </p>
                    <p class="m-0 ">
                      {% if tfa_verify.are_flanges_aligned == 'YES' %}
                      <i class="bi bi-check-circle-fill text-success ms-4 "></i>
                      {% elif tfa_verify.are_flanges_aligned == 'NO' %}
                      <i class="bi bi-x-circle-fill text-danger ms-4 "></i>
                      {% else %}
                      <i class="bi bi-slash-circle-fill text-secondary ms-4 "></i>
                      {% endif %}
                    </p>
                    <p class="m-0 ">
                      {% if tfa_verify.is_sign_of_corrosion == 'YES' %}
                      <i class="bi bi-check-circle-fill text-success ms-4 "></i>
                      {% elif tfa_verify.is_sign_of_corrosion == 'NO' %}
                      <i class="bi bi-x-circle-fill text-danger ms-4 "></i>
                      {% else %}
                      <i class="bi bi-slash-circle-fill text-secondary ms-4 "></i>
                      {% endif %}
                    </p>

                  </div>
                  <div class="col-lg-6 col-6">
                    <p class="m-0 text-muted ">VERIFICATION CHECKS</p>
                        <p class="m-0 ">Do you have the correct Gasket type?</p>
                        <p class="m-0 ">Are bolts lubed with correct BOSTIK N-S?</p>
                        <p class="m-0 ">Are the flange gaps within tolerance?</p>
                        <p class="m-0 ">Are the flanges properly aligned?</p>
                        <p class="m-0 ">Do the faces show signs of corrosion?</p>
                  </div>
                  <div class="col-lg-2 col-2">
                    <p class="m-0 text-muted ">FULL NAME</p>
                        <p class="m-0 ">{{tfa.temp_joint_id|default:"-"}}</p>
                  </div>
                  <div class="col-lg-2 col-2">
                    <p class="m-0 text-muted ">DATE COMPLETED</p>
                        <p class="m-0 ">{{tfa.temp_joint_id|default:"-"}}</p>
                  </div>
            
          
                 </div>
                 

                 <hr class="border m-0 my-4 pt-1">
                 <div class="row ">
                  <div class="col-lg-6 col-6">
                    <p class="m-0 text-muted ">QC ENGINEER</p>
                    <p class="m-0 ">{{tfa.temp_joint_id|default:"-"}}</p>
                  </div>
                  <div class="col-lg-6 col-6">
                    <p class="m-0 text-muted ">DATE APPROVED</p>
                        <p class="m-0 ">Is flange gasket seating surface good?</p>
                  </div>
            
            
          
                 </div>







                 

              
                </div>
          </div>
        </div>
    </div>

    <div class="row mt-4">
      <div class="col-lg-3">
        
      </div>
      <div class="col-lg-9">
        <div class="card border-0 shadow-sm rounded-3">
          <div class="card-header bg-white p-3">
            <p class="m-0 fw-bold fs-5 ">Report</p>
          </div>
     
          <div class="card-body ">
            <div class="row">
              <div class="col-6">
              <p class="m-0 fw-bold fs-5 d-none d-lg-block">  <img src="{% static 'img/utoc_headlogo1.png' %}" class="" width="50" alt="" />  FLANGE JOINT CONNECTION DATA SHEET</p>
              <p class="m-0 fw-bold  d-lg-none">  <img src="{% static 'img/utoc_headlogo1.png' %}" class="" width="50" alt="" />  FLANGE JOINT CONNECTION DATA SHEET</p>
              </div>
              <div class="col-4">
                  <p class="m-0 text-muted ">CLIENT DOCUMENT NUMBER</p>
                  <p class="m-0 ">{{tfa.temp_joint_id|default:"-"}}</p>
              </div>
              <div class="col-2">
                <p class="m-0 text-muted ">Page </p>
                <p class="m-0 ">1 of 1</p>
              </div>
           </div>
           <div class="bg-grey p-2 mt-3">

             <div class="row ">
               <div class="col-lg-3 col-3">
                 <p class="m-0 text-muted ">RECORD</p>
                 <p class="m-0 fs-5 fw-bold">{{tfa.id|default:"-"}}</p>
               </div>
               <div class="col-lg-3 col-3">
                 <p class="m-0 text-muted ">PROJECT NO</p>
                     <p class="m-0 ">{{tfa.project_name|default:"-"}}</p>
               </div>
               <div class="col-lg-3 col-3">
                 <p class="m-0 text-muted ">PROJECT NAME</p>
                     <p class="m-0 ">{{tfa.project_name|default:"-"}}</p>
               </div>
               <div class="col-lg-3 col-3">
                 <p class="m-0 text-muted ">DATE CREATED </p>
                     <p class="m-0 ">{{tfa.project_name|default:"-"}}</p>
               </div>
              </div>
              <hr class="border m-0 my-4 pt-1">
              <div class="row ">
               <div class="col-lg-3 col-3">
                 <p class="m-0 text-muted ">DRAWING NAME</p>
                 <p class="m-0 ">{{tfa.permanent_joint_id|default:"-"}}</p>
               </div>
               <div class="col-lg-3 col-3">
                 <p class="m-0 text-muted ">TEST PACK NO.</p>
                     <p class="m-0 ">{{tfa.test_pack_no|default:"-"}}</p>
               </div>
              </div>
           </div>
    


           <hr class="border m-0 my-4 pt-1">
           <div class="row ">
            <div class="col-lg-3 col-3">
              <p class="m-0 text-muted ">JOINT ID</p>
              <p class="m-0 fs-5 fw-bold">{{tfa.temp_joint_id|default:"-"}}</p>
            </div>
            <div class="col-lg-3 col-3">
              <p class="m-0 text-muted ">PIPE CLASS </p>
                  <p class="m-0 ">{{tfa.pipe_specification|default:"-"}}</p>
            </div>
            <div class="col-lg-3 col-3">
              <p class="m-0 text-muted ">FLANGE RATING</p>
                  <p class="m-0 ">{{tfa.flange_rating|default:"-"}}</p>
            </div>
            <div class="col-lg-3 col-3">
              <p class="m-0 text-muted ">FLANGE SIZE </p>
                  <p class="m-0 ">{{tfa.flange_size|default:"-"}}</p>
            </div>
           </div>
    


     

             <hr class="border m-0 my-4 pt-1">
             <p class="text-muted fw-bold fs-3">Photos</p>
             <div class="row mt-3">
              <div class="col-lg-3 col-3">
                <div class="card border-0 shadow-sm rounded-3">
                  <div class="card-body">
                    <img class="img-fluid rounded-3"  src="{{tfa_photos.flange_face_image.url}}" alt="">
                  </div>
                  <!-- <div class="card-footer bg-none alert alert-info m-0 p-3">
                    <p class="m-0 text-primary fw-bold">QaPass</p>
                    <p class="m-0  text-dark small">ROSARIO RYAN CARLO</p>
                    <p class="m-0  text-muted small">2021-08-20 15:59</p>
                  </div> -->
                </div>
              </div>
              <div class="col-lg-3 col-3">
                <div class="card border-0 shadow-sm rounded-3">
                  <div class="card-body">
                    <img class="img-fluid rounded-3"  src="{{tfa_photos.gasket_image.url}}" alt="">
                  </div>
                  <!-- <div class="card-footer bg-none alert alert-info m-0 p-3">
                    <p class="m-0 text-primary fw-bold">QaPass</p>
                    <p class="m-0  text-dark small">ROSARIO RYAN CARLO</p>
                    <p class="m-0  text-muted small">2021-08-20 15:59</p>
                  </div> -->
                </div>
              </div>
              <div class="col-lg-3 col-3">
                <div class="card border-0 shadow-sm rounded-3">
                  <div class="card-body">
                    <img class="img-fluid rounded-3"  src="{{tfa_photos.assembled_image.url}}" alt="">
                  </div>
                  <!-- <div class="card-footer bg-none alert alert-info m-0 p-3">
                    <p class="m-0 text-primary fw-bold">QaPass</p>
                    <p class="m-0  text-dark small">ROSARIO RYAN CARLO</p>
                    <p class="m-0  text-muted small">2021-08-20 15:59</p>
                  </div> -->
                </div>
              </div>
              <div class="col-lg-3 col-3">
                <div class="card border-0 shadow-sm rounded-3">
                  <div class="card-body">
                    <img class="img-fluid rounded-3"  src="{{tfa_photos.check_image.url}}" alt="">
                  </div>
                  <!-- <div class="card-footer bg-none alert alert-info m-0 p-3">
                    <p class="m-0 text-primary fw-bold">QaPass</p>
                    <p class="m-0  text-dark small">ROSARIO RYAN CARLO</p>
                    <p class="m-0  text-muted small">2021-08-20 15:59</p>
                  </div> -->
                </div>
              </div>
              <div class="col-lg-3 col-3 mt-3">
                <div class="card border-0 shadow-sm rounded-3">
                  <div class="card-body">
                    <img class="img-fluid rounded-3"  src="{{tfa_verify.final_qc_image.url}}" alt="">
                  </div>
                  <!-- <div class="card-footer bg-none alert alert-info m-0 p-3">
                    <p class="m-0 text-primary fw-bold">QaPass</p>
                    <p class="m-0  text-dark small">ROSARIO RYAN CARLO</p>
                    <p class="m-0  text-muted small">2021-08-20 15:59</p>
                  </div> -->
                </div>
              </div>
            </div>
     

     

          







             

          
            </div>
      </div>
    </div>
</div>


    
    
  </div>
  </section>

  <section class="section-all" id="pdf-page">
    <div class="container a4-page">
        <div class="row" id="pdf-page-1">
            <div class="col-lg-12">
              <div class="card border-0  rounded-3">
     
                <div class="card-body ">
                  <div class="row">
                      <div class="col-6">
                      <p class="m-0 fw-bold ">  <img src="{% static 'img/utoc_headlogo1.png' %}" class="" width="50" alt="" />  FLANGE JOINT CONNECTION DATA SHEET</p>
                      </div>
                      <div class="col-4">
                          <p class="m-0 text-muted ">CLIENT DOCUMENT NUMBER</p>
                          <p class="m-0 ">{{tfa.temp_joint_id|default:"-"}}</p>
                      </div>
                      <div class="col-2">
                        <p class="m-0 text-muted ">Page </p>
                        <p class="m-0 ">1 of 1</p>
                      </div>
                   </div>
                   <div class="bg-grey p-2 mt-3">
        
                     <div class="row ">
                       <div class="col-lg-3">
                         <p class="m-0 text-muted ">RECORD</p>
                         <p class="m-0 fw-bold">{{tfa.id|default:"-"}}</p>
                       </div>
                       <div class="col-lg-3">
                         <p class="m-0 text-muted ">PROJECT NO</p>
                             <p class="m-0 ">{{tfa.project_name|default:"-"}}</p>
                       </div>
                       <div class="col-lg-3">
                         <p class="m-0 text-muted ">PROJECT NAME</p>
                             <p class="m-0 ">{{tfa.project_name|default:"-"}}</p>
                       </div>
                       <div class="col-lg-3">
                         <p class="m-0 text-muted ">DATE CREATED </p>
                             <p class="m-0 ">{{tfa.project_name|default:"-"}}</p>
                       </div>
                      </div>
                      <hr class="border m-0 my-4 pt-1">
                      <div class="row ">
                       <div class="col-lg-3">
                         <p class="m-0 text-muted ">DRAWING NAME</p>
                         <p class="m-0 ">{{tfa.permanent_joint_id|default:"-"}}</p>
                       </div>
                       <div class="col-lg-3">
                         <p class="m-0 text-muted ">TEST PACK NO.</p>
                             <p class="m-0 ">{{tfa.test_pack_no|default:"-"}}</p>
                       </div>
                      </div>
                   </div>
            
        
        
                   <hr class="border m-0 my-4 pt-1">
                   <div class="row ">
                    <div class="col-lg-3">
                      <p class="m-0 text-muted ">JOINT ID</p>
                      <p class="m-0  fw-bold">{{tfa.temp_joint_id|default:"-"}}</p>
                    </div>
                    <div class="col-lg-3">
                      <p class="m-0 text-muted ">PIPE CLASS </p>
                          <p class="m-0 ">{{tfa.pipe_specification|default:"-"}}</p>
                    </div>
                    <div class="col-lg-3">
                      <p class="m-0 text-muted ">FLANGE RATING</p>
                          <p class="m-0 ">{{tfa.flange_rating|default:"-"}}</p>
                    </div>
                    <div class="col-lg-3">
                      <p class="m-0 text-muted ">FLANGE SIZE </p>
                          <p class="m-0 ">{{tfa.flange_size|default:"-"}}</p>
                    </div>
                   </div>
        
                    
        
           
        
                   <hr class="border m-0 my-4 pt-1">
                   <div class="row ">
                    <div class="col-lg-3">
                      <p class="m-0 text-muted ">FLANGE MATERIAL</p>
                      <p class="m-0 ">{{tfa.flange_material|default:"-"}}</p>
                    </div>
                    <div class="col-lg-3">
                      <p class="m-0 text-muted ">BOLT MATERIAL</p>
                          <p class="m-0 ">{{tfa.bolt_material|default:"-"}}</p>
                    </div>
                    <div class="col-lg-3">
                      <p class="m-0 text-muted ">NUMBER OF BOLTS</p>
                          <p class="m-0 ">{{tfa.no_of_bolts|default:"-"}}</p>
                    </div>
                    <div class="col-lg-3">
                      <p class="m-0 text-muted ">BOLT STUD SIZE </p>
                          <p class="m-0 ">{{tfa.bolt_diameter|default:"-"}}</p>
                    </div>
                   </div>
        
                   <hr class="border m-0 my-4 pt-1">
                   <div class="row ">
                    <div class="col-lg-3">
                      <p class="m-0 text-muted ">BOLT LENGTH</p>
                      <p class="m-0 ">{{tfa.bolt_length|default:"-"}}</p>
                    </div>
                    <div class="col-lg-3">
                      <p class="m-0 text-muted ">NUT MATERIAL</p>
                          <p class="m-0 ">{{tfa.nut_material|default:"-"}}</p>
                    </div>
                    <div class="col-lg-3">
                      <p class="m-0 text-muted ">GASKET TYPE</p>
                          <p class="m-0 ">{{tfa.gasket_material|default:"-"}}</p>
                    </div>
                    <div class="col-lg-3">
                      <p class="m-0 text-muted ">LUBRICANT </p>
                          <p class="m-0 ">{{tfa.lubricant|default:"-"}}</p>
                    </div>
                   </div>
        
                   <hr class="border m-0 my-4 pt-1">
                   <div class="row ">
                    <div class="col-lg-3">
                      <p class="m-0 text-muted ">TIGHTENING METHOD</p>
                      <p class="m-0 "> <i class="bi bi-square"></i> MANUAL</p>
                      <p class="m-0 "> <i class="bi bi-square"></i> 2HYDRAULIC</p>
                      <p class="m-0 "> <i class="bi bi-square"></i> TENSIONING</p>
                     
                    </div>
                    <div class="col-lg-6">
                        <p class="m-0 text-muted ">CRITICAL</p>
                        <p class="m-0 "> <i class="bi bi-square"></i> YES</p>
                      <p class="m-0 "> <i class="bi bi-square"></i> NO</p>
                   
                    </div>
             
           
                   </div>
        
                   <hr class="border m-0 my-4 pt-1">
                   <div class="row ">
                    <div class="col-lg-3">
                      <p class="m-0 text-muted ">TOOL DESCRIPTION</p>
                      <p class="m-0 ">{{tfa.flange_description|default:"-"}}</p>
                    </div>
                    <div class="col-lg-3">
                      <p class="m-0 text-muted ">SERIAL NUMBER</p>
                          <p class="m-0 ">{{tfa.system_number|default:"-"}}</p>
                    </div>
                    <div class="col-lg-3">
                      <p class="m-0 text-muted ">CALIBRATION DUE DATE</p>
                          <p class="m-0 ">{{tfa.temp_joint_id|default:"-"}}</p>
                    </div>
            
                   </div>
        
                   
                   <hr class="border m-0 my-4 pt-1">
                   <div class="row ">
                    <div class="col-lg-4">
                      <p class="m-0 text-muted ">REQUIRED TORQUE VALUE</p>
                      <p class="m-0 ">{{tfa.required_torque|default:"-"}}</p>
                    </div>
                    <div class="col-lg-2">
                      <p class="m-0 text-muted ">1ST PASS RANGE</p>
                          <p class="m-0 ">{{tfa.pass_one|default:"-"}}</p>
                    </div>
                    <div class="col-lg-2">
                      <p class="m-0 text-muted ">2ND PASS RANGE</p>
                          <p class="m-0 ">{{tfa.pass_two|default:"-"}}</p>
                    </div>
                    <div class="col-lg-2">
                      <p class="m-0 text-muted ">3RD PASS RANGE</p>
                          <p class="m-0 ">{{tfa.pass_three|default:"-"}}</p>
                    </div>
                    <div class="col-lg-2">
                      <p class="m-0 text-muted ">FINAL PASS RANGE</p>
                          <p class="m-0 ">{{tfa.pass_four|default:"-"}}</p>
                    </div>
            
                   </div>
        
                   <hr class="border m-0 my-4 pt-1">
                   <div class="row ">
                    <div class="col-lg-2">
                      <p class="m-0 text-muted ">ANSWER</p>
                      <p class="m-0 ">
                        {% if tfa_verify.is_gasket_type_correct == 'YES' %}
                        <i class="bi bi-check-circle-fill text-success ms-4 "></i>
                        {% elif tfa_verify.is_gasket_type_correct == 'NO' %}
                        <i class="bi bi-x-circle-fill text-danger ms-4 "></i>
                        {% else %}
                        <i class="bi bi-slash-circle-fill text-secondary ms-4 "></i>
                        {% endif %}
                      </p>
                      <p class="m-0 ">
                        {% if tfa_verify.are_bolts_lubricated == 'YES' %}
                        <i class="bi bi-check-circle-fill text-success ms-4 "></i>
                        {% elif tfa_verify.are_bolts_lubricated == 'NO' %}
                        <i class="bi bi-x-circle-fill text-danger ms-4 "></i>
                        {% else %}
                        <i class="bi bi-slash-circle-fill text-secondary ms-4 "></i>
                        {% endif %}
                      </p>
                      <p class="m-0 ">
                        {% if tfa_verify.is_flange_gap_within_tolerance == 'YES' %}
                        <i class="bi bi-check-circle-fill text-success ms-4 "></i>
                        {% elif tfa_verify.is_flange_gap_within_tolerance == 'NO' %}
                        <i class="bi bi-x-circle-fill text-danger ms-4 "></i>
                        {% else %}
                        <i class="bi bi-slash-circle-fill text-secondary ms-4 "></i>
                        {% endif %}
                      </p>
                      <p class="m-0 ">
                        {% if tfa_verify.are_flanges_aligned == 'YES' %}
                        <i class="bi bi-check-circle-fill text-success ms-4 "></i>
                        {% elif tfa_verify.are_flanges_aligned == 'NO' %}
                        <i class="bi bi-x-circle-fill text-danger ms-4 "></i>
                        {% else %}
                        <i class="bi bi-slash-circle-fill text-secondary ms-4 "></i>
                        {% endif %}
                      </p>
                      <p class="m-0 ">
                        {% if tfa_verify.is_sign_of_corrosion == 'YES' %}
                        <i class="bi bi-check-circle-fill text-success ms-4 "></i>
                        {% elif tfa_verify.is_sign_of_corrosion == 'NO' %}
                        <i class="bi bi-x-circle-fill text-danger ms-4 "></i>
                        {% else %}
                        <i class="bi bi-slash-circle-fill text-secondary ms-4 "></i>
                        {% endif %}
                      </p>
                    </div>
                    <div class="col-lg-6">
                      <p class="m-0 text-muted ">VERIFICATION CHECKS</p>
                      <p class="m-0 ">Do you have the correct Gasket type?</p>
                      <p class="m-0 ">Are bolts lubed with correct BOSTIK N-S?</p>
                      <p class="m-0 ">Are the flange gaps within tolerance?</p>
                      <p class="m-0 ">Are the flanges properly aligned?</p>
                      <p class="m-0 ">Do the faces show signs of corrosion?</p>
                    </div>
                    <div class="col-lg-2">
                      <p class="m-0 text-muted ">FULL NAME</p>
                          <p class="m-0 ">{{tfa.temp_joint_id|default:"-"}}</p>
                    </div>
                    <div class="col-lg-2">
                      <p class="m-0 text-muted ">DATE </p>
                          <p class="m-0 ">{{tfa.temp_joint_id|default:"-"}}</p>
                    </div>
              
            
                   </div>
        
                   <hr class="border m-0 my-4 pt-1">
                   <div class="row ">
                    <div class="col-lg-6">
                      <p class="m-0 text-muted ">QC ENGINEER</p>
                      <p class="m-0 ">{{tfa.temp_joint_id|default:"-"}}</p>
                    </div>
                    <div class="col-lg-6">
                      <p class="m-0 text-muted ">DATE APPROVED</p>
                          <p class="m-0 ">Is flange gasket seating surface good?</p>
                    </div>
              
              
            
                   </div>
        
        
        
        
        
        
        
                   
        
                
                  </div>
            </div>
            </div>
        </div>

        <div class="row mt-4" id="pdf-page-2" style="page-break-before: always;">
            <div class="col-lg-12">
              <div class="card border-0  rounded-3">
        
                <div class="card-body ">
                  <div class="row">
                    <div class="col-6">
                    <p class="m-0 fw-bold ">  <img src="{% static 'img/utoc_headlogo1.png' %}" class="" width="50" alt="" />  FLANGE JOINT CONNECTION DATA SHEET</p>
                    </div>
                    <div class="col-4">
                        <p class="m-0 text-muted ">CLIENT DOCUMENT NUMBER</p>
                        <p class="m-0 ">{{tfa.temp_joint_id|default:"-"}}</p>
                    </div>
                    <div class="col-2">
                      <p class="m-0 text-muted ">Page </p>
                      <p class="m-0 ">1 of 1</p>
                    </div>
                 </div>
                 <div class="bg-grey p-2 mt-3">
            
                   <div class="row ">
                     <div class="col-lg-3">
                       <p class="m-0 text-muted ">RECORD</p>
                       <p class="m-0 fw-bold">{{tfa.id|default:"-"}}</p>
                     </div>
                     <div class="col-lg-3">
                       <p class="m-0 text-muted ">PROJECT NO</p>
                           <p class="m-0 ">{{tfa.project_name|default:"-"}}</p>
                     </div>
                     <div class="col-lg-3">
                       <p class="m-0 text-muted ">PROJECT NAME</p>
                           <p class="m-0 ">{{tfa.project_name|default:"-"}}</p>
                     </div>
                     <div class="col-lg-3">
                       <p class="m-0 text-muted ">DATE CREATED </p>
                           <p class="m-0 ">{{tfa.project_name|default:"-"}}</p>
                     </div>
                    </div>
                    <hr class="border m-0 my-4 pt-1">
                    <div class="row ">
                     <div class="col-lg-3">
                       <p class="m-0 text-muted ">DRAWING NAME</p>
                       <p class="m-0 ">{{tfa.permanent_joint_id|default:"-"}}</p>
                     </div>
                     <div class="col-lg-3">
                       <p class="m-0 text-muted ">TEST PACK NO.</p>
                           <p class="m-0 ">{{tfa.test_pack_no|default:"-"}}</p>
                     </div>
                    </div>
                 </div>
            
            
            
                 <hr class="border m-0 my-4 pt-1">
                 <div class="row ">
                  <div class="col-lg-3">
                    <p class="m-0 text-muted ">JOINT ID</p>
                    <p class="m-0  fw-bold">{{tfa.temp_joint_id|default:"-"}}</p>
                  </div>
                  <div class="col-lg-3">
                    <p class="m-0 text-muted ">PIPE CLASS </p>
                        <p class="m-0 ">{{tfa.pipe_specification|default:"-"}}</p>
                  </div>
                  <div class="col-lg-3">
                    <p class="m-0 text-muted ">FLANGE RATING</p>
                        <p class="m-0 ">{{tfa.flange_rating|default:"-"}}</p>
                  </div>
                  <div class="col-lg-3">
                    <p class="m-0 text-muted ">FLANGE SIZE </p>
                        <p class="m-0 ">{{tfa.flange_size|default:"-"}}</p>
                  </div>
                 </div>
            
                  
            
            
            
                 <hr class="border m-0 my-4 pt-1">
                 <p class="text-muted fw-bold">Photos</p>
                 <div class="row mt-3">
                  <div class="col-lg-3">
                    <div class="card border-0 shadow-sm rounded-3">
                      <div class="card-body">
                        <img class="img-fluid rounded-3"  src="{{tfa_photos.flange_face_image.url}}" alt="">
                      </div>
                      <!-- <div class="card-footer bg-none alert alert-info m-0 p-3">
                        <p class="m-0 text-primary fw-bold">QaPass</p>
                        <p class="m-0  text-dark small">ROSARIO RYAN CARLO</p>
                        <p class="m-0  text-muted small">2021-08-20 15:59</p>
                      </div> -->
                    </div>
                  </div>
                  <div class="col-lg-3">
                    <div class="card border-0 shadow-sm rounded-3">
                      <div class="card-body">
                        <img class="img-fluid rounded-3"  src="{{tfa_photos.gasket_image.url}}" alt="">
                      </div>
                      <!-- <div class="card-footer bg-none alert alert-info m-0 p-3">
                        <p class="m-0 text-primary fw-bold">QaPass</p>
                        <p class="m-0  text-dark small">ROSARIO RYAN CARLO</p>
                        <p class="m-0  text-muted small">2021-08-20 15:59</p>
                      </div> -->
                    </div>
                  </div>
                  <div class="col-lg-3">
                    <div class="card border-0 shadow-sm rounded-3">
                      <div class="card-body">
                        <img class="img-fluid rounded-3"  src="{{tfa_photos.assembled_image.url}}" alt="">
                      </div>
                      <!-- <div class="card-footer bg-none alert alert-info m-0 p-3">
                        <p class="m-0 text-primary fw-bold">QaPass</p>
                        <p class="m-0  text-dark small">ROSARIO RYAN CARLO</p>
                        <p class="m-0  text-muted small">2021-08-20 15:59</p>
                      </div> -->
                    </div>
                  </div>
                  <div class="col-lg-3">
                    <div class="card border-0 shadow-sm rounded-3">
                      <div class="card-body">
                        <img class="img-fluid rounded-3"  src="{{tfa_photos.check_image.url}}" alt="">
                      </div>
                      <!-- <div class="card-footer bg-none alert alert-info m-0 p-3">
                        <p class="m-0 text-primary fw-bold">QaPass</p>
                        <p class="m-0  text-dark small">ROSARIO RYAN CARLO</p>
                        <p class="m-0  text-muted small">2021-08-20 15:59</p>
                      </div> -->
                    </div>
                  </div>
                  <div class="col-lg-3 mt-3">
                    <div class="card border-0 shadow-sm rounded-3">
                      <div class="card-body">
                        <img class="img-fluid rounded-3"  src="{{tfa_verify.final_qc_image.url}}" alt="">
                      </div>
                      <!-- <div class="card-footer bg-none alert alert-info m-0 p-3">
                        <p class="m-0 text-primary fw-bold">QaPass</p>
                        <p class="m-0  text-dark small">ROSARIO RYAN CARLO</p>
                        <p class="m-0  text-muted small">2021-08-20 15:59</p>
                      </div> -->
                    </div>
                  </div>
                </div>
            
            
            
            
                
            
            
            
            
            
            
            
                   
            
                
                  </div>
            </div>
            </div>
        </div>
    </div>
</section>


 









{% endblock body_content %}

{% block body_js %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.3/html2pdf.bundle.min.js"></script>
<script>
  function downloadPDF() {
      // Get the content to clone
      const sectionToClone = document.getElementById("pdf-page");
  
      // Check if sectionToClone exists and has content
      if (sectionToClone && sectionToClone.innerHTML.trim() !== "") {
          // Show the section temporarily for PDF generation
          sectionToClone.style.display = "block"; 
          
          // Clone the section
          const pdfContent = sectionToClone.cloneNode(true);
  
          // Use html2pdf to generate the PDF
          html2pdf()
              .from(pdfContent)
              .save('document.pdf')
              .then(() => {
                  console.log("PDF generated successfully!");
                  // Keep the section hidden after PDF generation
                  sectionToClone.style.display = "none"; 
              })
              .catch((error) => {
                  console.error("Error generating PDF: ", error);
                  // Hide the section again if there's an error
                  sectionToClone.style.display = "none"; 
              });
      } else {
          console.error("No content to generate PDF from.");
          alert("No content to generate PDF from."); // Alert for user feedback
      }
  }
  </script>
  
  
  
  
  
  
 
{% endblock body_js %}
